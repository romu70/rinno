---
// SEO Component - Meta tags, Open Graph, and Structured Data
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description?: string;
  image?: ImageMetadata | string;
  imageAlt?: string;
  type?: "website" | "article" | "profile";
  noindex?: boolean;
  canonicalUrl?: string;
  structuredData?: object;
}

const siteUrl = "https://romu70.github.io";
const defaultDescription =
  "Portfolio de Romuald Tisserand, Product & Design Leader spécialisé dans les solutions SaaS B2B. Je crée des produits pour résoudre les problèmes des pros.";
const defaultImage = "/portrait.jpg"; // We'll need to add portrait to public folder

const {
  title,
  description = defaultDescription,
  image = defaultImage,
  imageAlt = "Romuald Tisserand - Product & Design Leader",
  type = "website",
  noindex = false,
  canonicalUrl = Astro.url.pathname,
  structuredData,
} = Astro.props;

const fullTitle = title.includes("Romuald Tisserand")
  ? title
  : `${title} | Romuald Tisserand`;
const canonical = new URL(canonicalUrl, siteUrl).href;
const imageUrl = typeof image === "string" ? new URL(image, siteUrl).href : image;

// Default Person structured data
const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  name: "Romuald Tisserand",
  jobTitle: "Product & Design Leader",
  description:
    "Product & Design Leader spécialisé dans les solutions SaaS B2B",
  url: siteUrl,
  sameAs: [],
  knowsAbout: [
    "Product Management",
    "UX Design",
    "Design System",
    "Product Led Organization",
    "SaaS",
    "B2B",
    "Startup",
  ],
};
---

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta name="title" content={fullTitle} />
<meta name="description" content={description} />
<meta
  name="keywords"
  content="Product Management, UX Design, Design System, Product Led Organization, SaaS, B2B, Startup, Romuald Tisserand"
/>
<meta name="author" content="Romuald Tisserand" />
<link rel="canonical" href={canonical} />

{noindex && <meta name="robots" content="noindex, nofollow" />}

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={imageUrl} />
<meta property="og:image:alt" content={imageAlt} />
<meta property="og:locale" content="fr_FR" />
<meta property="og:site_name" content="Romuald Tisserand - Portfolio" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonical} />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={imageUrl} />
<meta name="twitter:image:alt" content={imageAlt} />

<!-- Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(personSchema)} />

{
  structuredData && (
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />
  )
}
